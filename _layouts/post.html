---
layout: default
---
<div class="container blog-post" style="max-width: 850px;">
    <header style="text-align:center; margin-bottom: 20px;">
        <h1 style="font-size: 2.2em; border-bottom: 2px solid #eee; padding-bottom:10px; margin-bottom: 5px;">{{ page.title }}</h1>
    </header>

    <div class="content">
        {{ content }}
    </div>
    
    <!-- ★★★ ここからが修正されたナビゲーションコード ★★★ -->
    <div class="navigation-links" style="display: flex; justify-content: space-between; align-items: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
        {% assign collection_name = page.collection %}
        {% if collection_name %}
            
            <!-- まず、非表示ではない記事だけをフィルタリングして新しいリストを作成 -->
            {% assign visible_posts = site[collection_name] | where_exp:"item", "item.hidden != true" | sort: 'date' %}

            {% for post in visible_posts %}
                {% if post.url == page.url %}
                    {% assign current_index = forloop.index0 %}
                {% endif %}
            {% endfor %}

            {% assign prev_post = visible_posts[current_index | minus: 1] %}
            {% assign next_post_index = current_index | plus: 1 %}
            {% if next_post_index < visible_posts.size %}
                {% assign next_post = visible_posts[next_post_index] %}
            {% endif %}

            <div class="prev-link" style="width: 45%; text-align: left;">
                {% if prev_post %}
                    <a href="{{ prev_post.url | relative_url }}" class="read-more-btn">« {{ prev_post.title }}</a>
                {% endif %}
            </div>
            <div class="next-link" style="width: 45%; text-align: right;">
                {% if next_post %}
                    <a href="{{ next_post.url | relative_url }}" class="read-more-btn">{{ next_post.title }} »</a>
                {% endif %}
            </div>

        {% endif %}
    </div>

    <div class="back-link" style="text-align: center; margin-top: 50px;">
        <a href="{{ '/' | relative_url }}" class="main-button" style="display:inline-block; width:auto;">« トップページに戻る</a>
    </div>
</div>